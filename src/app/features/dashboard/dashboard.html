<z-layout class="h-screen w-full overflow-hidden">
  <z-sidebar
    [zWidth]="250"
    [zCollapsible]="true"
    [zCollapsed]="sidebarCollapsed()"
    [zCollapsedWidth]="70"
    (zCollapsedChange)="onCollapsedChange($event)"
    class="p-0!"
  >
    <nav [class]="'flex h-full flex-col overflow-hidden ' + (sidebarCollapsed() ? 'gap-1 p-1 pt-4' : 'gap-4 p-4')">
      <!-- Theme Toggle - Top Section -->
    <button
  z-button
  zType="ghost"
  class="justify-center"
  (click)="toggleTheme()"
  zTooltip="Toggle theme"
  zPosition="right"
>
  <z-icon zType="moon" />
</button>


      <!-- Main Menu Group -->
      <z-sidebar-group>
        @if (!sidebarCollapsed()) {
          <z-sidebar-group-label>Main</z-sidebar-group-label>
        }
        @for (item of mainMenuItems; track item.label) {
          <button
            type="button"
            z-button
            zType="ghost"
            [class]="sidebarCollapsed() ? 'justify-center' : 'justify-start'"
            [zTooltip]="sidebarCollapsed() ? item.label : ''"
            zPosition="right"
          >
            <z-icon [zType]="item.icon" [class]="sidebarCollapsed() ? '' : 'mr-2'" />
            @if (!sidebarCollapsed()) {
              <span>{{ item.label }}</span>
            }
          </button>
        }
      </z-sidebar-group>

      <!-- Workspace Menu Group -->
      <z-sidebar-group>
        @if (!sidebarCollapsed()) {
          <z-sidebar-group-label>Workspace</z-sidebar-group-label>
        }
        @for (item of workspaceMenuItems; track item.label) {
          @if (item.submenu) {
            <!-- Menu with submenu -->
            <button
              type="button"
              z-button
              zType="ghost"
              z-menu
              [zMenuTriggerFor]="submenu"
              zPlacement="rightTop"
              [class]="sidebarCollapsed() ? 'justify-center' : 'justify-start'"
              [zTooltip]="sidebarCollapsed() ? item.label : null"
              zPosition="right"
            >
              <z-icon [zType]="item.icon" [class]="sidebarCollapsed() ? '' : 'mr-2'" />
              @if (!sidebarCollapsed()) {
                <span class="flex-1 text-left">{{ item.label }}</span>
                <z-icon zType="chevron-right" />
              }
            </button>

            <ng-template #submenu>
              <div z-menu-content class="w-48">
                @for (subitem of item.submenu; track subitem.label) {
                  <button type="button" z-menu-item>{{ subitem.label }}</button>
                }
              </div>
            </ng-template>
          } @else {
            <!-- Simple menu item -->
            <button
              type="button"
              z-button
              zType="ghost"
              [class]="sidebarCollapsed() ? 'justify-center' : 'justify-start'"
              [zTooltip]="sidebarCollapsed() ? item.label : ''"
              zPosition="right"
            >
              <z-icon [zType]="item.icon" [class]="sidebarCollapsed() ? '' : 'mr-2'" />
              @if (!sidebarCollapsed()) {
                <span>{{ item.label }}</span>
              }
            </button>
          }
        }
      </z-sidebar-group>

      <!-- User Profile - Bottom Section -->
      <div class="mt-auto p-2">
        <!-- User Menu -->
        <div
          z-menu
          [zMenuTriggerFor]="userMenu"
          zPlacement="rightBottom"
          class="hover:bg-accent flex cursor-pointer items-center justify-center gap-2 rounded-md p-2"
        >
          <z-avatar zSrc="https://zardui.com/images/avatar/imgs/avatar_image.jpg" zAlt="Zard UI" />
          @if (!sidebarCollapsed()) {
            <div>
              <span class="font-medium">zardui</span>
              <div class="text-xs">test@zardui.com</div>
            </div>
            <z-icon zType="chevrons-up-down" class="ml-auto" />
          }
        </div>

        <!-- User Menu Template -->
        <ng-template #userMenu>
          <div z-menu-content class="w-48">
            <button type="button" z-menu-item>
              <z-icon zType="user" class="mr-2" />Profile
            </button>
            <button type="button" z-menu-item>
              <z-icon zType="settings" class="mr-2" />Settings
            </button>
            <z-divider zSpacing="sm" />
            <button type="button" z-menu-item (click)="logout()">
              <z-icon zType="log-out" class="mr-2" />Logout
            </button>
          </div>
        </ng-template>
      </div>
    </nav>
  </z-sidebar>

  <!-- Main Content Area -->
  <z-content class="h-full p-0">
    <div class="flex items-center p-4 border-b">
      <button type="button" z-button zType="ghost" zSize="sm" class="-ml-2" (click)="toggleSidebar()">
        <z-icon zType="panel-left" />
      </button>
      <z-divider zOrientation="vertical" class="ml-2 h-4" />
      <z-breadcrumb zWrap="wrap" zAlign="start">
        <z-breadcrumb-item><span aria-current="page">Dashboard</span></z-breadcrumb-item>
      </z-breadcrumb>
    </div>

    <div class="h-full overflow-auto p-6 space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="h-64 bg-card rounded-lg p-6 shadow-sm border flex items-center justify-center">
          <div class="text-center">
            <h3 class="font-semibold mb-1">Analytics</h3>
            <p class="text-sm text-muted-foreground">Real-time insights</p>
          </div>
        </div>
        <div class="h-64 bg-card rounded-lg p-6 shadow-sm border flex items-center justify-center">
          <div class="text-center">
            <z-icon zType="users" class="w-12 h-12 text-muted-foreground mb-2 mx-auto" />
            <h3 class="font-semibold mb-1">Users</h3>
            <p class="text-sm text-muted-foreground">Manage team members</p>
          </div>
        </div>
        <div class="h-64 bg-card rounded-lg p-6 shadow-sm border flex items-center justify-center">
          <div class="text-center">
            <z-icon zType="settings" class="w-12 h-12 text-muted-foreground mb-2 mx-auto" />
            <h3 class="font-semibold mb-1">Settings</h3>
            <p class="text-sm text-muted-foreground">App configuration</p>
          </div>
        </div>
      </div>
    </div>
  </z-content>
</z-layout>
