<!-- src/app/shared/components/app-sidebar/app-sidebar.component.html -->
<nav
  [class]="
    'flex h-full flex-col overflow-hidden ' +
    (collapsed() ? 'gap-1 p-1 pt-4' : 'gap-4 p-4')
  "
>
  <!-- Theme Toggle -->
  <button
    z-button
    zType="ghost"
    class="justify-center"
    (click)="toggleTheme()"
    zTooltip="Toggle theme"
    zPosition="right"
  >
    <z-icon [zType]="themeIcon()" />
  </button>

  <!-- Main Menu Group -->
  <z-sidebar-group>
    @if (!collapsed()) {
      <z-sidebar-group-label>Main</z-sidebar-group-label>
    }
    @for (item of mainMenuItems; track item.label) {
      <button
        type="button"
        z-button
        zType="ghost"
        [class]="collapsed() ? 'justify-center' : 'justify-start'"
        [zTooltip]="collapsed() ? item.label : ''"
        zPosition="right"
        (click)="navigateTo(item.route!)"
      >
        <z-icon [zType]="item.icon" [class]="collapsed() ? '' : 'mr-2'" />
        @if (!collapsed()) {
          <span>{{ item.label }}</span>
        }
      </button>
    }
  </z-sidebar-group>

  <!-- Workspace Menu Group -->
  <z-sidebar-group>
    @if (!collapsed()) {
      <z-sidebar-group-label>Workspace</z-sidebar-group-label>
    }
    @for (item of workspaceMenuItems; track item.label) {
      <button
        type="button"
        z-button
        zType="ghost"
        [class]="collapsed() ? 'justify-center' : 'justify-start'"
        [zTooltip]="collapsed() ? item.label : ''"
        zPosition="right"
        (click)="navigateTo(item.route!)"
      >
        <z-icon [zType]="item.icon" [class]="collapsed() ? '' : 'mr-2'" />
        @if (!collapsed()) {
          <span>{{ item.label }}</span>
        }
      </button>
    }
  </z-sidebar-group>

  <!-- User Profile -->
  <div class="mt-auto p-2">
    <div
      z-menu
      [zMenuTriggerFor]="userMenu"
      zPlacement="rightBottom"
      class="hover:bg-accent flex cursor-pointer items-center justify-center gap-2 rounded-md p-2"
    >
      <!-- Avatar with initials fallback -->
      <div
        class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center text-primary font-semibold text-sm shrink-0"
      >
        {{ orgInitials() }}
      </div>
      @if (!collapsed()) {
        <div class="min-w-0 flex-1">
          <span class="font-medium block truncate">{{ orgName() }}</span>
          <div class="text-xs text-muted-foreground truncate">{{ orgEmail() }}</div>
        </div>
        <z-icon zType="chevrons-up-down" class="ml-auto shrink-0" />
      }
    </div>

    <ng-template #userMenu>
      <div z-menu-content class="w-48">
        <button type="button" z-menu-item (click)="logout()">
          <z-icon zType="log-out" class="mr-2" />Logout
        </button>
      </div>
    </ng-template>
  </div>
</nav>